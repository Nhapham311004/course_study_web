<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .video-list li {
            margin-bottom: 8px;
        }
        .delete-btn {
            color: white;
            background-color: red;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            border-radius: 4px;
        }
        .delete-btn:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Welcome, {{ username }} ({{ role }})</h2>
        <a href="{{ url_for('logout') }}">Logout</a>
        <a href="{{ url_for('change_password') }}">Change Password</a>

        {% if role == "admin" %}
        <h3>Upload New Video</h3>
        <form method="POST" enctype="multipart/form-data">
            <input type="file" name="video" accept="video/*" required>
            <button type="submit">Upload</button>
        </form>
        {% endif %}
        {% if role == "admin" %}
        <a href="{{ url_for('manage_users') }}">Manage Users</a>
        {% endif %}
        <!-- Add this somewhere in your dashboard.html -->
        <h3>Account Settings</h3>
        <a href="{{ url_for('change_password') }}">Change Password</a>

        <h3>Available Videos</h3>
        <ul class="video-list">
            {% for v in videos %}
            <li>
                <a href="{{ url_for('video', name=v) }}">{{ v }}</a>
                {% if role == "admin" %}
                <form method="POST" action="{{ url_for('delete_video', name=v) }}" 
                      style="display:inline;" 
                      onsubmit="return confirm('Are you sure you want to delete {{ v }}?');">
                    <button type="submit" class="delete-btn">Delete</button>
                </form>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
